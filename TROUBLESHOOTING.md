# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ª–æ–≥–∏–Ω–∞ –ø–æ–ª—É—á–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ **500 (Internal Server Error)**:

```
POST http://localhost:5173/api/auth/login 500 (Internal Server Error)
```

## üîç –ü—Ä–∏—á–∏–Ω—ã

1. **–ö–æ–ª–æ–Ω–∫–∞ `role` –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ –≤ –ë–î** - –º–æ–¥–µ–ª—å User –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –±—ã–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
2. **Vite proxy –Ω—É–∂–Ω–∞ –±—ã–ª–∞ –¥–æ–ø. –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `changeOrigin: true` –∏ `secure: false`
3. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–æ–ª—å** - –±—ã–ª `user` –≤–º–µ—Å—Ç–æ `admin`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```bash
cd backend
node migrate-db.js
```

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `role` –≤ —Ç–∞–±–ª–∏—Ü—É `authentications`
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'user'`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–æ–ª—å admin

```bash
node -e "
require('dotenv').config();
const db = require('./models');

(async () => {
  const admin = await db.User.findOne({ where: { username: 'admin' } });
  if (admin) {
    admin.role = 'admin';
    await admin.save();
  }
  process.exit(0);
})();
"
```

### 3. –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite

**frontend/vite.config.js:**

```javascript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
      secure: false,
    },
  },
}
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**backend/routes/auth.routes.js:**

- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ –≤ dev —Ä–µ–∂–∏–º–µ

## üìã –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã/—Å–æ–∑–¥–∞–Ω—ã

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ:

- `backend/routes/auth.routes.js` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `backend/userUtils.js` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `frontend/vite.config.js` - —É–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è proxy

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ:

- `backend/migrate-db.js` - —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- `backend/check-db.js` - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î
- `READY.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üöÄ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏  
‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (admin/user)  
‚úÖ –ó–∞—â–∏—Ç–∞ API endpoints  
‚úÖ –°–∫—Ä—ã—Ç–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ —Ä–æ–ª—è–º

## üìù –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```
Username: admin
Password: admin
Role: admin
```

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5174
2. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω `admin` –∏ –ø–∞—Ä–æ–ª—å `admin`
3. –ù–∞–∂–º–∏—Ç–µ "Log in"
4. –í—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   üìù Login attempt for user: admin
   ‚úÖ User found: admin, checking password...
   ‚úÖ Password valid for user: admin, generating token...
   ‚úÖ Login successful for user: admin
   ```

## üí° –°–æ–≤–µ—Ç—ã

- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –æ—á–∏—Å—Ç–∏—Ç–µ localStorage –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Application ‚Üí Local Storage ‚Üí Delete All)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω—ã: backend (8080) –∏ frontend (5174)
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ backend –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
